# –ú–æ–¥—É–ª—å: timetable_api

## –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å `timetable_api.py` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π. –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ –≥—Ä—É–ø–ø–µ –∏ –¥–∞—Ç–µ.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–æ –≥—Ä—É–ø–ø–µ –∏ –¥–∞—Ç–µ
- üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –æ–¥–Ω–æ–π –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –≥—Ä—É–ø–ø–∞–º
- üìñ –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (standard –∏–ª–∏ replacements)

### –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–¥–∞—Ç—å:
1. –ï—Å–ª–∏ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É –µ—Å—Ç—å **replacements** (–∑–∞–º–µ–Ω—ã) - –æ—Ç–¥–∞—ë—Ç—Å—è –æ–Ω–æ
2. –ï—Å–ª–∏ –∑–∞–º–µ–Ω –Ω–µ—Ç - –æ—Ç–¥–∞—ë—Ç—Å—è **standard** (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ)

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞–º –≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–Ω–∞—Ç—å –æ —Ç–∏–ø–∞—Ö –∏ –≤–µ—Ä—Å–∏—è—Ö.

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üìñ POST /api/v1/public/ttable/get

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π –ø–æ –≥—Ä—É–ø–ø–µ –∏ –¥–∞—Ç–µ. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–∑–∞–º–µ–Ω—ã –∏–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ). –ü—É–±–ª–∏—á–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**Middleware:** –ù–µ—Ç (–ø—É–±–ª–∏—á–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:** –ù–µ—Ç

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "group": "–ò–°-21-1",
  "date": "2024-03-15"
}
```

–ò–ª–∏ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø:
```json
{
  "group": ["–ò–°-21-1", "–ü–†-21-2"],
  "date": "2024-03-15"
}
```

–ü–æ–ª—è:
- `group` (str | list[str] | None): –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –∏–ª–∏ —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø. –ï—Å–ª–∏ `null` - –≤–µ—Ä–Ω—ë—Ç—Å—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø
- `date` (date): –î–∞—Ç–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞

**–û—Ç–≤–µ—Ç (200):**
```json
{
  "schedule": [
    {
      "position": 1,
      "title": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞",
      "fio": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
      "aud": "101"
    },
    {
      "position": 2,
      "title": "–§–∏–∑–∏–∫–∞",
      "fio": "–ü–µ—Ç—Ä–æ–≤–∞ –ê.–°.",
      "aud": "205"
    },
    {
      "position": 3,
      "title": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
      "fio": "–°–∏–¥–æ—Ä–æ–≤ –ü.–ö.",
      "aud": "301"
    }
  ]
}
```

–ü–æ–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:
- `position` (int): –ù–æ–º–µ—Ä –ø–∞—Ä—ã (1, 2, 3, 4, 5, 6)
- `title` (str): –ù–∞–∑–≤–∞–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
- `fio` (str): –§–ò–û –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- `aud` (str): –ù–æ–º–µ—Ä –∞—É–¥–∏—Ç–æ—Ä–∏–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `db.ttable.get_ttable()` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–∑ –ë–î —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º –≤–µ—Ä—Å–∏–∏
- `log_event()` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
   - `group` - –æ–¥–Ω–∞ –≥—Ä—É–ø–ø–∞, —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –∏–ª–∏ `null` (–≤—Å–µ –≥—Ä—É–ø–ø—ã)
   - `date_field` - –¥–∞—Ç–∞ –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–∞—è)

2. **–ó–∞–ø—Ä–æ—Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–∑ –ë–î:**
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `db.ttable.get_ttable(group, date)`
   - –ë–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é:
     - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ **replacements** –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É
     - –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–º–µ–Ω—ã - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ö
     - –ï—Å–ª–∏ –Ω–µ—Ç - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **standard** —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
   - –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (`is_current = true`, `status_id = 1 –∏–ª–∏ 3`)

3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–∞
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `repr(body)` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

4. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞:**
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ë–î –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JSON —Å –ø–æ–ª–µ–º `schedule`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –≠–Ω–¥–ø–æ–∏–Ω—Ç –ø—É–±–ª–∏—á–Ω—ã–π - —Å—Ç—É–¥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø–æ–ª—É—á–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –≤–µ—Ä—Å–∏–∏ —É–ø—Ä–æ—â–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- –ï—Å–ª–∏ –≥—Ä—É–ø–ø–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ (`null`) - –≤–µ—Ä–Ω—ë—Ç—Å—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø –∫–æ—Ä–ø—É—Å–∞

---

## –§—É–Ω–∫—Ü–∏–∏

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (route handlers), –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç. –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ —Å–ª–æ—è –¥–∞–Ω–Ω—ã—Ö (`db.*`) –∏ —É—Ç–∏–ª–∏—Ç.

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### üåê –í–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `fastapi` - –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è API
  - `APIRouter` - –†–æ—É—Ç–µ—Ä –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
  - `Request` - –û–±—ä–µ–∫—Ç HTTP –∑–∞–ø—Ä–æ—Å–∞

### üîó –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–æ–¥—É–ª–∏

**–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö:**
- `core.data.postgre.PgSqlDep` - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ PostgreSQL
  - `db.ttable.get_ttable()` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º –≤–µ—Ä—Å–∏–∏

**Response —Å—Ö–µ–º—ã:**
- `core.response_schemas.timetable_api.TimetableGetResponse` - –°—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º

**Request —Å—Ö–µ–º—ã:**
- `core.schemas.ttable_schema.ScheduleFilterSchema` - –°—Ö–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
  - `group` (str | list[str] | None) - –ì—Ä—É–ø–ø–∞ –∏–ª–∏ —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø
  - `date_field` (date) - –î–∞—Ç–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (alias: "date")

**–£—Ç–∏–ª–∏—Ç—ã:**
- `core.utils.logger.log_event` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø

–≠–Ω–¥–ø–æ–∏–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `/api/v1/public/ttable/` - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
- –°—Ç—É–¥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±–µ–∑ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É
- –£–¥–æ–±–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –≤–µ—Ä—Å–∏–∏

–õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –≤–µ—Ä—Å–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î:
1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç replacements:** –ï—Å–ª–∏ –Ω–∞ –¥–∞—Ç—É –µ—Å—Ç—å –∑–∞–º–µ–Ω—ã - –æ–Ω–∏ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
2. **Fallback –Ω–∞ standard:** –ï—Å–ª–∏ –∑–∞–º–µ–Ω –Ω–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
3. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞:** API –∫–ª–∏–µ–Ω—Ç –Ω–µ –∑–Ω–∞–µ—Ç –æ —Ç–∏–ø–∞—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
- **–û–¥–Ω–∞ –≥—Ä—É–ø–ø–∞:** `"group": "–ò–°-21-1"` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã
- **–ù–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø:** `"group": ["–ò–°-21-1", "–ü–†-21-2"]` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø
- **–í—Å–µ –≥—Ä—É–ø–ø—ã:** `"group": null` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø (–º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º)

### –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã

–ü–æ–ª–µ `date` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç alias `date_field` –≤ —Å—Ö–µ–º–µ:
- –í –∑–∞–ø—Ä–æ—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `"date": "2024-03-15"`
- –í–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `date_field`
- –§–æ—Ä–º–∞—Ç: ISO 8601 (YYYY-MM-DD)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
- `position` - –Ω–æ–º–µ—Ä –ø–∞—Ä—ã (–¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- `title` - –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
- `fio` - –§–ò–û –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- `aud` - –∞—É–¥–∏—Ç–æ—Ä–∏—è

–≠—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞–º.

## üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üìÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã

```python
POST /api/v1/public/ttable/get
Content-Type: application/json

{
  "group": "–ò–°-21-1",
  "date": "2024-03-15"
}

# –û—Ç–≤–µ—Ç (200):
{
  "schedule": [
    {
      "position": 1,
      "title": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞",
      "fio": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
      "aud": "101"
    },
    {
      "position": 2,
      "title": "–§–∏–∑–∏–∫–∞",
      "fio": "–ü–µ—Ç—Ä–æ–≤–∞ –ê.–°.",
      "aud": "205"
    },
    {
      "position": 3,
      "title": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
      "fio": "–°–∏–¥–æ—Ä–æ–≤ –ü.–ö.",
      "aud": "301"
    }
  ]
}
```

### üìö –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø

```python
POST /api/v1/public/ttable/get
Content-Type: application/json

{
  "group": ["–ò–°-21-1", "–ü–†-21-2", "–ò–°-21-2"],
  "date": "2024-03-15"
}

# –û—Ç–≤–µ—Ç (200):
{
  "schedule": [
    {
      "position": 1,
      "title": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞",
      "fio": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
      "aud": "101"
    },
    {
      "position": 1,
      "title": "–§–∏–∑–∏–∫–∞",
      "fio": "–ü–µ—Ç—Ä–æ–≤–∞ –ê.–°.",
      "aud": "205"
    },
    {
      "position": 2,
      "title": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
      "fio": "–°–∏–¥–æ—Ä–æ–≤ –ü.–ö.",
      "aud": "301"
    }
    // ... —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø
  ]
}
```

### üìñ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É

```python
POST /api/v1/public/ttable/get
Content-Type: application/json

{
  "group": "–ò–°-21-1"
  // date –Ω–µ —É–∫–∞–∑–∞–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞
}

# –û—Ç–≤–µ—Ç (200):
{
  "schedule": [
    // ... —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
  ]
}
```

### üåê –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø

```python
POST /api/v1/public/ttable/get
Content-Type: application/json

{
  "group": null,
  "date": "2024-03-15"
}

# –û—Ç–≤–µ—Ç (200):
{
  "schedule": [
    // ... —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø –∫–æ—Ä–ø—É—Å–∞
    // –ú–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º –º–∞—Å—Å–∏–≤–æ–º
  ]
}
```

### üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∑ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```javascript
// JavaScript/TypeScript –ø—Ä–∏–º–µ—Ä
async function getSchedule(group, date) {
  const response = await fetch('/api/v1/public/ttable/get', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      group: group,
      date: date || new Date().toISOString().split('T')[0]
    })
  });
  
  const data = await response.json();
  return data.schedule;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const schedule = await getSchedule('–ò–°-21-1', '2024-03-15');
console.log(schedule);
```

### üêç –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∑ Python –∫–ª–∏–µ–Ω—Ç–∞

```python
import requests
from datetime import date

def get_schedule(group, schedule_date=None):
    """–ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≥—Ä—É–ø–ø—ã –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É."""
    url = 'https://api.example.com/api/v1/public/ttable/get'
    
    payload = {
        'group': group,
        'date': schedule_date or date.today().isoformat()
    }
    
    response = requests.post(url, json=payload)
    response.raise_for_status()
    
    return response.json()['schedule']

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
schedule = get_schedule('–ò–°-21-1', '2024-03-15')
for lesson in schedule:
    print(f"–ü–∞—Ä–∞ {lesson['position']}: {lesson['title']} - {lesson['fio']} (–∞—É–¥. {lesson['aud']})")
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

### –°–≤—è–∑—å —Å main_ui –∏ ext_card

–ú–æ–¥—É–ª—å `timetable_api` - —ç—Ç–æ **–ø—É–±–ª–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:
- **main_ui** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–º–µ—Ç–æ–¥–∏—Å—Ç—ã)
- **ext_card** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–º–µ—Ç–æ–¥–∏—Å—Ç—ã)
- **timetable_api** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Å—Ç—É–¥–µ–Ω—Ç—ã, –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø)

Workflow:
1. –ú–µ—Ç–æ–¥–∏—Å—Ç —Å–æ–∑–¥–∞—ë—Ç –≤–µ—Ä—Å–∏—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ `main_ui`
2. –ú–µ—Ç–æ–¥–∏—Å—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ `ext_card`
3. –ú–µ—Ç–æ–¥–∏—Å—Ç —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤–µ—Ä—Å–∏—é —á–µ—Ä–µ–∑ `main_ui`
4. –°—Ç—É–¥–µ–Ω—Ç—ã –≤–∏–¥—è—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `timetable_api`
