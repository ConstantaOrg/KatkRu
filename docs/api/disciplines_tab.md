# –ú–æ–¥—É–ª—å: disciplines_tab

## –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å `disciplines_tab.py` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞–º–∏ (–ø—Ä–µ–¥–º–µ—Ç–∞–º–∏) –≤ —Å–∏—Å—Ç–µ–º–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è. –í–∫–ª—é—á–∞–µ—Ç CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ (–∞–∫—Ç–∏–≤–Ω—ã–µ/—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ) –∏ —Å–≤—è–∑—è–º–∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω —Å –≥—Ä—É–ø–ø–∞–º–∏.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìö –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
- üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ (–∞–∫—Ç–∏–≤–Ω—ã–µ ‚Üî —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ)
- üîó –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑—è–º–∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞-–≥—Ä—É–ø–ø–∞ (g2d relations)
- üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤—è–∑–µ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã —Å –≥—Ä—É–ø–ø–∞–º–∏
- üîê –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ JWT –∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–æ–ª–µ–π

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –∏–º–µ—é—Ç –¥–≤–∞ —Å—Ç–∞—Ç—É—Å–∞:
- **–ê–∫—Ç–∏–≤–Ω—ã–µ** (`is_active = true`) - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏
- **–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ** (`is_active = false`) - –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–µ–ø–æ–¥–∞—é—Ç—Å—è, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –°–∫—Ä—ã–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –°–≤—è–∑–∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞-–≥—Ä—É–ø–ø–∞ (g2d)

–°–≤—è–∑—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –ø—Ä–µ–ø–æ–¥–∞—é—Ç—Å—è –≤ –∫–∞–∫–æ–π –≥—Ä—É–ø–ø–µ:
- –û–¥–Ω–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≥—Ä—É–ø–ø–∞–º–∏
- –û–¥–Ω–∞ –≥—Ä—É–ø–ø–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
- –°–≤—è–∑—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üìñ POST /api/v1/private/disciplines/get

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ –≥—Ä—É–ø–ø–µ, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –º–µ—Ç–æ–¥–∏—Å—Ç–∞.

**Middleware:**
- `role_require(Roles.methodist, Roles.read_all)` - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å –º–µ—Ç–æ–¥–∏—Å—Ç–∞ –∏–ª–∏ read_all
- `JWTCookieDep` - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ cookie

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (query):**
- `limit` (int): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ DisciplinesPagenSchema)
- `offset` (int): –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "is_active": true,
  "group_name": "–ò–°-21-1"
}
```

–ü–æ–ª—è:
- `is_active` (bool | None): –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É. `true` - –∞–∫—Ç–∏–≤–Ω—ã–µ, `false` - —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ, `null` - –≤—Å–µ
- `group_name` (str | None): –§–∏–ª—å—Ç—Ä –ø–æ –≥—Ä—É–ø–ø–µ. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —ç—Ç–æ–π –≥—Ä—É–ø–ø–æ–π

**–û—Ç–≤–µ—Ç (200):**
```json
{
  "disciplines": [
    {
      "id": 1,
      "title": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞",
      "is_active": true
    },
    {
      "id": 2,
      "title": "–§–∏–∑–∏–∫–∞",
      "is_active": true
    },
    {
      "id": 3,
      "title": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
      "is_active": true
    }
  ]
}
```

–ü–æ–ª—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã:
- `id` (int): ID –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
- `title` (str): –ù–∞–∑–≤–∞–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
- `is_active` (bool): –°—Ç–∞—Ç—É—Å (–∞–∫—Ç–∏–≤–Ω–∞—è/—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `db.disciplines.get_all()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `log_event()` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**

1. –ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
   - `is_active` - —Å—Ç–∞—Ç—É—Å –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
   - `group_name` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –≥—Ä—É–ø–ø–µ
   - `limit`, `offset` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è

2. –ó–∞–ø—Ä–æ—Å –∫ –ë–î —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
   - –ï—Å–ª–∏ `is_active` —É–∫–∞–∑–∞–Ω - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ —Å—Ç–∞—Ç—É—Å—É
   - –ï—Å–ª–∏ `group_name` —É–∫–∞–∑–∞–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –≥—Ä—É–ø–ø–æ–π —á–µ—Ä–µ–∑ g2d
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è (limit/offset)

3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º:
   - –§–∏–ª—å—Ç—Ä—ã –≤—ã–¥–µ–ª–µ–Ω—ã –∂—ë–ª—Ç—ã–º
   - user_id –≤—ã–¥–µ–ª–µ–Ω –∫—Ä–∞—Å–Ω—ã–º

4. –í–æ–∑–≤—Ä–∞—Ç —Å–ø–∏—Å–∫–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
- –§–∏–ª—å—Ç—Ä –ø–æ –≥—Ä—É–ø–ø–µ –ø–æ–ª–µ–∑–µ–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –†–æ–ª—å read_all –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

### üîÑ PUT /api/v1/private/disciplines/update

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –∏–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π.

**Middleware:**
- `role_require(Roles.methodist)` - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å –º–µ—Ç–æ–¥–∏—Å—Ç–∞
- `JWTCookieDep` - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ cookie

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:** –ù–µ—Ç

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "set_as_active": [1, 2, 3],
  "set_as_deprecated": [4, 5]
}
```

–ü–æ–ª—è:
- `set_as_active` (list[int]): –°–ø–∏—Å–æ–∫ ID –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- `set_as_deprecated` (list[int]): –°–ø–∏—Å–æ–∫ ID –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –¥–ª—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏

**–û—Ç–≤–µ—Ç (200):**
```json
{
  "success": true,
  "message": "–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã —Å–º–µ–Ω–∏–ª–∏ —Å—Ç–∞—Ç—É—Å—ã",
  "active_upd_count": 3,
  "depr_upd_count": 2
}
```

–ü–æ–ª—è –æ—Ç–≤–µ—Ç–∞:
- `success` (bool): –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
- `message` (str): –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
- `active_upd_count` (int): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
- `depr_upd_count` (int): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `db.disciplines.switch_status()` - –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- `log_event()` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**

1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ ID –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
   - `set_as_active` - –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
   - `set_as_deprecated` - –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –¥–ª—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏

2. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –ë–î:
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `is_active = true` –¥–ª—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –∏–∑ `set_as_active`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `is_active = false` –¥–ª—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –∏–∑ `set_as_deprecated`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–ª–Ω—ã–º –¥–∞–º–ø–æ–º –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

4. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å —Å—á—ë—Ç—á–∏–∫–∞–º–∏

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ú–∞—Å—Å–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –°—á—ë—Ç—á–∏–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—Å–µ –ª–∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- –ú–æ–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å

---

### ‚ûï POST /api/v1/private/disciplines/add

**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –≤ —Å–∏—Å—Ç–µ–º—É. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã.

**Middleware:**
- `role_require(Roles.methodist)` - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å –º–µ—Ç–æ–¥–∏—Å—Ç–∞
- `JWTCookieDep` - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ cookie

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:** –ù–µ—Ç

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "title": "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"
}
```

–ü–æ–ª—è:
- `title` (str): –ù–∞–∑–≤–∞–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)

**–û—Ç–≤–µ—Ç (200) - –£—Å–ø–µ—à–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ:**
```json
{
  "success": true,
  "message": "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞",
  "discipline_id": 42
}
```

**–û—Ç–≤–µ—Ç (409) - –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
```json
{
  "success": false,
  "message": "–¢–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç —É–∂–µ –µ—Å—Ç—å",
  "detail": "–¢–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç —É–∂–µ –µ—Å—Ç—å"
}
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `db.disciplines.add()` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –≤ –ë–î
- `create_disciplines_add_response()` - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- `create_response_json()` - –°–æ–∑–¥–∞–Ω–∏–µ JSON –æ—Ç–≤–µ—Ç–∞ —Å —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–æ–º
- `log_event()` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**

1. –ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –≤ –ë–î:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è
   - –ï—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `None`

2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
   - **–ï—Å–ª–∏ `discipline_id` is None:**
     - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è WARNING —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 409 Conflict
   - **–ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ:**
     - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ —Å ID –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 200 OK —Å ID –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã

3. –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö:
   - user_id - –∫—Ä–∞—Å–Ω—ã–π
   - title, discipline_id - —Å–∏–Ω–∏–π

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ù–æ–≤–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `is_active = true`
- –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤ —Ä–∞–º–∫–∞—Ö —Å–∏—Å—Ç–µ–º—ã
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É –Ω—É–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å —Å –≥—Ä—É–ø–ø–∞–º–∏ —á–µ—Ä–µ–∑ `/add_relation`

---

### üîó POST /api/v1/private/disciplines/get_relations

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≥—Ä—É–ø–ø, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–æ–π. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –≤ –∫–∞–∫–∏—Ö –≥—Ä—É–ø–ø–∞—Ö –ø—Ä–µ–ø–æ–¥–∞—ë—Ç—Å—è –¥–∞–Ω–Ω–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞.

**Middleware:**
- `role_require(Roles.methodist, Roles.read_all)` - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å –º–µ—Ç–æ–¥–∏—Å—Ç–∞ –∏–ª–∏ read_all
- `JWTCookieDep` - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ cookie

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:** –ù–µ—Ç

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "discipline_id": 5
}
```

–ü–æ–ª—è:
- `discipline_id` (int): ID –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã

**–û—Ç–≤–µ—Ç (200):**
```json
{
  "group_relations": [
    {
      "group_id": 1,
      "group_name": "–ò–°-21-1"
    },
    {
      "group_id": 2,
      "group_name": "–ò–°-21-2"
    },
    {
      "group_id": 5,
      "group_name": "–ü–†-21-1"
    }
  ]
}
```

–ü–æ–ª—è —Å–≤—è–∑–∏:
- `group_id` (int): ID –≥—Ä—É–ø–ø—ã
- `group_name` (str): –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `db.disciplines.get_relations()` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤—è–∑–µ–π g2d –∏–∑ –ë–î
- `log_event()` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**

1. –ü–æ–ª—É—á–µ–Ω–∏–µ `discipline_id` –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
2. –ó–∞–ø—Ä–æ—Å —Å–≤—è–∑–µ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã g2d (group-to-discipline)
3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º discipline_id (magenta)
4. –í–æ–∑–≤—Ä–∞—Ç —Å–ø–∏—Å–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–≤—è–∑–µ–π –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞
- –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –Ω–µ —Å–≤—è–∑–∞–Ω–∞ –Ω–∏ —Å –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø–æ–π

---

### üîó POST /api/v1/private/disciplines/add_relation

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–æ–π –∏ –≥—Ä—É–ø–ø–æ–π. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –ø—Ä–µ–ø–æ–¥–∞—ë—Ç—Å—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ.

**Middleware:**
- `role_require(Roles.methodist)` - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å –º–µ—Ç–æ–¥–∏—Å—Ç–∞
- `JWTCookieDep` - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ cookie

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:** –ù–µ—Ç

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "discipline_id": 5,
  "group_name": "–ò–°-21-1"
}
```

–ü–æ–ª—è:
- `discipline_id` (int): ID –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
- `group_name` (str): –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã

**–û—Ç–≤–µ—Ç (200) - –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ:**
```json
{
  "success": true,
  "message": "–°–≤—è–∑—å —Å–æ–∑–¥–∞–Ω–∞"
}
```

**–û—Ç–≤–µ—Ç (400) - –ì—Ä—É–ø–ø–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
```json
{
  "detail": "–ì—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```

**–û—Ç–≤–µ—Ç (409) - –°–≤—è–∑—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
```json
{
  "detail": "–°–≤—è–∑—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
}
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `db.disciplines.add_relations_g2d()` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∏ –≤ –ë–î
- `log_event()` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `HTTPException` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTTP –æ—à–∏–±–æ–∫

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**

1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–≤—è–∑–∏:
   - `discipline_id` - ID –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
   - `group_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã

2. –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤—è–∑–∏ –≤ –ë–î:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Å–≤—è–∑–∏
   - –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ g2d

3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
   - **400 Bad Request:** –ì—Ä—É–ø–ø–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
     - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è WARNING
     - –í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è HTTPException
   - **409 Conflict:** –°–≤—è–∑—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
     - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è INFO
     - –í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è HTTPException
   - **200 OK:** –°–≤—è–∑—å —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ
     - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

4. –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö:
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ - —Å–∏–Ω–∏–π

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –°–≤—è–∑—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –û–¥–Ω–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –≥—Ä—É–ø–ø
- –°–≤—è–∑—å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –∏ –≥—Ä—É–ø–ø—ã

---

## –§—É–Ω–∫—Ü–∏–∏

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (route handlers), –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç. –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ —Å–ª–æ—è –¥–∞–Ω–Ω—ã—Ö (`db.*`) –∏ —É—Ç–∏–ª–∏—Ç.

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### üåê –í–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `fastapi` - –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è API
  - `APIRouter` - –†–æ—É—Ç–µ—Ä –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
  - `Depends` - –°–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - `HTTPException` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTTP –æ—à–∏–±–æ–∫
  - `Body` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
- `starlette.requests.Request` - –û–±—ä–µ–∫—Ç HTTP –∑–∞–ø—Ä–æ—Å–∞
- `typing.Annotated` - –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤

### üîó –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–æ–¥—É–ª–∏

**–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö:**
- `core.data.postgre.PgSqlDep` - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ PostgreSQL
  - `db.disciplines.get_all()` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
  - `db.disciplines.switch_status()` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
  - `db.disciplines.add()` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
  - `db.disciplines.get_relations()` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤—è–∑–µ–π g2d
  - `db.disciplines.add_relations_g2d()` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∏

**Response —Å—Ö–µ–º—ã:**
- `core.response_schemas.disciplines_tab` - –°—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–æ–≤:
  - `DisciplinesGetResponse` - –°–ø–∏—Å–æ–∫ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
  - `DisciplinesUpdateResponse` - –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
- `core.utils.response_model_utils` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤:
  - `DisciplinesAddSuccessResponse` - –£—Å–ø–µ—à–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
  - `DisciplinesAddConflictResponse` - –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
  - `create_disciplines_add_response()` - –§–∞–±—Ä–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
  - `create_response_json()` - –°–æ–∑–¥–∞–Ω–∏–µ JSON –æ—Ç–≤–µ—Ç–∞

**Request —Å—Ö–µ–º—ã:**
- `core.schemas.n8n_ui.disciplines_schema` - –°—Ö–µ–º—ã –∑–∞–ø—Ä–æ—Å–æ–≤:
  - `DisciplineFilterSchema` - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (is_active, group_name)
  - `DisciplineUpdateSchema` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ (set_as_active, set_as_deprecated)
  - `DisciplineAddSchema` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ (title)
  - `Group2DisciplineSchema` - –°–≤—è–∑—å g2d (discipline_id, group_name)
- `core.schemas.schemas2depends.DisciplinesPagenSchema` - –ü–∞–≥–∏–Ω–∞—Ü–∏—è (limit, offset)
- `core.schemas.cookie_settings_schema.JWTCookieDep` - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–£—Ç–∏–ª–∏—Ç—ã:**
- `core.utils.anything.Roles` - –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (methodist, read_all)
- `core.utils.lite_dependencies.role_require` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π
- `core.utils.logger.log_event` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 409 Conflict - –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/private/disciplines/add`

**–ü—Ä–∏—á–∏–Ω–∞:** –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": false,
  "message": "–¢–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç —É–∂–µ –µ—Å—Ç—å",
  "detail": "–¢–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç —É–∂–µ –µ—Å—Ç—å"
}
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** WARNING - "–ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç"

### 409 Conflict - –°–≤—è–∑—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/private/disciplines/add_relation`

**–ü—Ä–∏—á–∏–Ω–∞:** –°–≤—è–∑—å –º–µ–∂–¥—É –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–æ–π –∏ –≥—Ä—É–ø–ø–æ–π —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "detail": "–°–≤—è–∑—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
}
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** INFO - "–ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–≤—è–∑–∫—É"

### 400 Bad Request - –ì—Ä—É–ø–ø–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/private/disciplines/add_relation`

**–ü—Ä–∏—á–∏–Ω–∞:** –£–∫–∞–∑–∞–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º–µ

**–û—Ç–≤–µ—Ç:**
```json
{
  "detail": "–ì—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** WARNING - "–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –≥—Ä—É–ø–ø–∞"

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –°—Ç–∞—Ç—É—Å—ã –¥–∏—Å—Ü–∏–ø–ª–∏–Ω

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (soft delete):
- –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏
- –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º–µ–Ω—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å `is_active`
- –≠—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

### –°–≤—è–∑–∏ g2d (group-to-discipline)

–°–≤—è–∑–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —É—á–µ–±–Ω—ã–π –ø–ª–∞–Ω:
- –ö–∞–∫–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –ø—Ä–µ–ø–æ–¥–∞—é—Ç—Å—è –≤ –≥—Ä—É–ø–ø–µ
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –ú–µ—Ç–æ–¥–∏—Å—Ç –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –¥–ª—è –≥—Ä—É–ø–ø—ã
- –°–≤—è–∑—å –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å (—ç–Ω–¥–ø–æ–∏–Ω—Ç –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —ç—Ç–æ–º –º–æ–¥—É–ª–µ)

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ query:
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `offset` - —Å–º–µ—â–µ–Ω–∏–µ (–Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã * limit)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ–ª—å—à–∏–º–∏ —Å–ø–∏—Å–∫–∞–º–∏

### –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö

–õ–æ–≥–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç ANSI escape codes:
- `\033[33m` - –∂—ë–ª—Ç—ã–π (—Ñ–∏–ª—å—Ç—Ä—ã)
- `\033[31m` - –∫—Ä–∞—Å–Ω—ã–π (user_id)
- `\033[34m` - —Å–∏–Ω–∏–π (title, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- `\033[35m` - magenta (discipline_id)
- `\033[0m` - —Å–±—Ä–æ—Å —Ü–≤–µ—Ç–∞

## üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üìñ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω

```python
POST /api/v1/private/disciplines/get?limit=20&offset=0
Content-Type: application/json
Cookie: access_token=...; refresh_token=...

{
  "is_active": true,
  "group_name": null
}

# –û—Ç–≤–µ—Ç (200):
{
  "disciplines": [
    {"id": 1, "title": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "is_active": true},
    {"id": 2, "title": "–§–∏–∑–∏–∫–∞", "is_active": true},
    {"id": 3, "title": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", "is_active": true}
  ]
}
```

### üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –ø–æ –≥—Ä—É–ø–ø–µ

```python
POST /api/v1/private/disciplines/get?limit=20&offset=0
Content-Type: application/json
Cookie: access_token=...; refresh_token=...

{
  "is_active": true,
  "group_name": "–ò–°-21-1"
}

# –û—Ç–≤–µ—Ç (200):
{
  "disciplines": [
    {"id": 1, "title": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "is_active": true},
    {"id": 5, "title": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", "is_active": true},
    {"id": 8, "title": "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö", "is_active": true}
  ]
}
```

### ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã

```python
POST /api/v1/private/disciplines/add
Content-Type: application/json
Cookie: access_token=...; refresh_token=...

{
  "title": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ"
}

# –û—Ç–≤–µ—Ç (200):
{
  "success": true,
  "message": "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞",
  "discipline_id": 42
}
```

### üîÑ –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

```python
PUT /api/v1/private/disciplines/update
Content-Type: application/json
Cookie: access_token=...; refresh_token=...

{
  "set_as_active": [10, 11, 12],
  "set_as_deprecated": [5, 6]
}

# –û—Ç–≤–µ—Ç (200):
{
  "success": true,
  "message": "–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã —Å–º–µ–Ω–∏–ª–∏ —Å—Ç–∞—Ç—É—Å—ã",
  "active_upd_count": 3,
  "depr_upd_count": 2
}
```

### üîó –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤—è–∑–µ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã

```python
POST /api/v1/private/disciplines/get_relations
Content-Type: application/json
Cookie: access_token=...; refresh_token=...

{
  "discipline_id": 5
}

# –û—Ç–≤–µ—Ç (200):
{
  "group_relations": [
    {"group_id": 1, "group_name": "–ò–°-21-1"},
    {"group_id": 2, "group_name": "–ò–°-21-2"},
    {"group_id": 5, "group_name": "–ü–†-21-1"}
  ]
}
```

### üîó –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞-–≥—Ä—É–ø–ø–∞

```python
POST /api/v1/private/disciplines/add_relation
Content-Type: application/json
Cookie: access_token=...; refresh_token=...

{
  "discipline_id": 42,
  "group_name": "–ò–°-21-1"
}

# –û—Ç–≤–µ—Ç (200):
{
  "success": true,
  "message": "–°–≤—è–∑—å —Å–æ–∑–¥–∞–Ω–∞"
}
```

### ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
# –ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É
POST /api/v1/private/disciplines/add
{
  "title": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞"
}

# –û—Ç–≤–µ—Ç (409):
{
  "success": false,
  "message": "–¢–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç —É–∂–µ –µ—Å—Ç—å",
  "detail": "–¢–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç —É–∂–µ –µ—Å—Ç—å"
}

# –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Å–≤—è–∑—å —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≥—Ä—É–ø–ø–æ–π
POST /api/v1/private/disciplines/add_relation
{
  "discipline_id": 5,
  "group_name": "–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è–ì—Ä—É–ø–ø–∞"
}

# –û—Ç–≤–µ—Ç (400):
{
  "detail": "–ì—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```

## üîÑ –¢–∏–ø–∏—á–Ω—ã–π workflow

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –≤ —Å–∏—Å—Ç–µ–º—É

```
1. –ú–µ—Ç–æ–¥–∏—Å—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É:
   POST /api/v1/private/disciplines/add
   {"title": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ"}
   ‚Üí discipline_id: 42

2. –ú–µ—Ç–æ–¥–∏—Å—Ç —Å–≤—è–∑—ã–≤–∞–µ—Ç –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É —Å –≥—Ä—É–ø–ø–∞–º–∏:
   POST /api/v1/private/disciplines/add_relation
   {"discipline_id": 42, "group_name": "–ò–°-21-1"}
   
   POST /api/v1/private/disciplines/add_relation
   {"discipline_id": 42, "group_name": "–ò–°-21-2"}

3. –ú–µ—Ç–æ–¥–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤—è–∑–∏:
   POST /api/v1/private/disciplines/get_relations
   {"discipline_id": 42}
   ‚Üí ["–ò–°-21-1", "–ò–°-21-2"]

4. –¢–µ–ø–µ—Ä—å –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —ç—Ç–∏—Ö –≥—Ä—É–ø–ø
```

### –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã

```
1. –ú–µ—Ç–æ–¥–∏—Å—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã:
   POST /api/v1/private/disciplines/get
   {"is_active": true}

2. –ú–µ—Ç–æ–¥–∏—Å—Ç –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à—É—é –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É:
   PUT /api/v1/private/disciplines/update
   {"set_as_active": [], "set_as_deprecated": [15]}

3. –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Å–∫—Ä—ã—Ç–∞ –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏
```
